<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Quiz + Envelope Letter</title>
<style>
  body {
    margin: 100;
    background: #e28cab; /* Pink background */
    height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
    font-family: Arial, sans-serif;
    flex-direction: column;
  }

  .question-image {
    width: 400px;
    height: auto;
    margin-top: 50px; /* Gap between image and question */
    border-radius: 15px;
    box-shadow: 0 0 15px rgba(0,0,0,0.3);
    transition: all 0.5s ease;
  }

  h1 {
    margin-bottom: 20px;
    color: white;
    margin-top: 70px;
  }

  .button-frame {
    top: -100px;
    position: relative;
    width: 1600px;
    height: 1500px;
    display: flex;
border: 0px dashed white;
    justify-content: center;
    align-items: center;
    overflow: hidden;
  }

  .quiz-button {
    padding: 40px 100px;
    font-size: 20px;
    border: none;
    border-radius: 10px;
    cursor: pointer;
    transition: all 0.8s ease;
    background-color: #ffb6c9;
    color: white;
    position: absolute;
  }

  .quiz-button:hover { background-color: #ff7aa0; }
  .correct { transform: scale(1.2); background-color: #4CAF50; }

  /* Envelope Styles */
  .envelope-container {
    display: none; /* initially hidden */
    position: fixed;   /* make it independent of other elements */
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%); /* perfectly center horizontally & vertically */
    flex-direction: column;
    justify-content: center;
    align-items: center;
    width: 100%;   /* optional */
    height: 100%;  /* optional */
    background-color: #ffb6c9; /* full pink background */
    z-index: 1000; /* on top of everything */
}
  .envelope {
    position: relative;
    top: 0px;
    width: 350px;
    height: 250px;
    background: pink;
    border: 3px solid #ffdce6;
    border-radius: 10px;
    box-shadow: 0 0 20px rgba(0,0,0,0.2);
    transform: scale(1.2);
    margin-bottom: 20px;
    transition: transform 0.6s ease;
  }

  .envelope:hover { transform: scale(1.03); }

  .flap {
    position: absolute;
    top: -2px;
    left: -3px;
    width: 101%;
    height: 50%;
    border: 3px solid #ffdce6;
    border-radius: 10px;
    background: #ffb6c9;
    border-bottom-left-radius: 40px;
    border-bottom-right-radius: 40px;
    transform-origin: top center;
    transform: rotateX(0deg);
    transition: transform 1s cubic-bezier(0.22,0.61,0.36,1);
    z-index: 3;
  }

  .envelope.open .flap { transform: rotateX(180deg); }

  .heart {
    position: absolute;
    top: 52%;
    left: 50%;
    transform: translate(-50%, -50%) rotate(-45deg);
    width: 48px; height: 48px;
    background-color: red;
    z-index: 5;
    pointer-events: none;
    animation: heartbeat 1.5s infinite ease-in-out;
  }
  .heart::before, .heart::after {
    content: "";
    position: absolute;
    width: 48px; height: 48px;
    background-color: red;
    border-radius: 50%;
  }
  .heart::before { top:-24px; left:0; }
  .heart::after { left:24px; top:0; }
  @keyframes heartbeat {
    0%,100% { transform: translate(-50%,-50%) rotate(-45deg) scale(1);}
    30% { transform: translate(-50%,-50%) rotate(-45deg) scale(1.2);}
    60% { transform: translate(-50%,-50%) rotate(-45deg) scale(1);}
  }
  .open .heart {
    top:10%; opacity:0;
    transform: translate(-50%, -50%) rotate(-45deg) scale(0.8);
  }

  .letter-full {
    position: fixed;
    top: 50%; left: 50%;
    transform: translate(-50%, -50%) scale(0.8);
    width: 400px; height: 225px;
    background: #fff;
    border: 3px solid #ffdce6;
    border-radius: 15px;
    box-shadow: 0 0 25px rgba(0,0,0,0.4);
    display: flex;
    justify-content: space-between;
    align-items: center;
    opacity: 0;
    pointer-events: none;
    transition: opacity 1s ease-out, transform 1s cubic-bezier(0.22,0.61,0.36,1);
    z-index: 20;
  }

  .envelope.open + .letter-full {
    opacity: 1;
    pointer-events: auto;
    transform: translate(-50%, -50%) scale(0.8);
  }

  .letter-full:hover {
    transform: translate(-50%, -50%) scale(4) rotate(-90deg);
  }

  .left-page, .right-page {
    flex:1; height:100%; display:flex; justify-content:center; align-items:center; position:relative; overflow:visible;
  }

  .left-page::after {
    content:"";
    position:absolute; right:0; top:10%; height:80%; width:2px;
    background: linear-gradient(to bottom, transparent, #ffb6c9, transparent);
    opacity:0.7;
  }

  .letter-img-rotated {
    width:90%; height:auto; transform: rotate(90deg);
    transition: transform 0.6s ease;
  }
  .letter-img-rotated:hover {
    transform: rotate(5deg) scale(6.5); border-radius:20px; z-index:9999;
  }
</style>
</head>
<body>

<!-- Image on top of question -->
<img src="catdog.png" id="questionImage" class="question-image" alt="Question Image">

<b><h1>บิบิ่รักเค้ามั้ยยยยยย?????</h1></b>

<div class="button-frame" id="buttonFrame">
  <button class="quiz-button" id="btn1">ไม่รักแย้วว :P</button>
  <button class="quiz-button" id="btn2">รักที่สูดในโลกก</button>
</div>

<div class="envelope-container" id="envelopeContainer">
  <div class="envelope" id="envelope">
    <div class="flap" id="flap"></div>
    <div class="heart"></div>
  </div>

  <div class="letter-full" id="letterFull">
    <div class="left-page">
      <img src="1st.png" class="letter-img-rotated" alt="Left Page">
    </div>
    <div class="right-page">
      <img src="image.jpg" class="letter-img-rotated" alt="Right Page">
    </div>
  </div>
</div>

<script>
const btn1 = document.getElementById("btn1");
const btn2 = document.getElementById("btn2");
const correctButton = btn2;
const wrongButton = btn1;

const envelopeContainer = document.getElementById("envelopeContainer");
const envelope = document.getElementById("envelope");
const flap = document.getElementById("flap");
const frame = document.getElementById("buttonFrame");

const questionImage = document.getElementById("questionImage");

let wrongClickCount = 0; // Track number of wrong clicks

// Initial positions
const frameRect = frame.getBoundingClientRect();
wrongButton.style.left = `${frameRect.width / 3 - wrongButton.offsetWidth/2}px`;
wrongButton.style.top = `150px`;
correctButton.style.left = `${(frameRect.width * 2/3) - correctButton.offsetWidth/2}px`;
correctButton.style.top = `150px`;

// Array of images to cycle through
const wrongImages = ["catdog.png","angry.png", "angry2.png","sad.png"];

// Move wrong button randomly inside the frame only when clicked
function moveButtonRandom(button) {
  const frameRect = frame.getBoundingClientRect();
  const btnWidth = button.offsetWidth;
  const btnHeight = button.offsetHeight;

  const maxX = frameRect.width - btnWidth - 10;
  const maxY = frameRect.height - btnHeight - 10;

  const x = Math.random() * maxX;
  const y = Math.random() * maxY;

  button.style.left = `${x}px`;
  button.style.top = `${y}px`;
}

function handleAnswer(button) {
  if(button === correctButton){
    button.classList.add("correct");
    envelopeContainer.style.display = "flex";
  } else {
    if(wrongClickCount < wrongImages.length){
      questionImage.src = wrongImages[wrongClickCount];
    }
    wrongClickCount++;
    moveButtonRandom(button);
  }
}

btn1.addEventListener("click", () => handleAnswer(btn1));
btn2.addEventListener("click", () => handleAnswer(btn2));

// Open envelope flap
flap.addEventListener("click", () => envelope.classList.add("open"));
</script>

</body>
</html>


